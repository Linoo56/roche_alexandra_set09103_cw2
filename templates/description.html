{% extends "main.html" %}
{% block style %}
<style>

  td:nth-child(2){
    text-align-last: end;
  }
  .google-maps {
    border: 0;
    width: -webkit-fill-available;
    height: 400px;
  }
  dd {
    margin-bottom: 5px;
  }
  tr .sub{
    font-weight: normal;
  }
  .school-logo{
    text-align: center;
    margin: 20px;
    margin-bottom: 30px;
  }
</style>
{% endblock %}

{% block content %}
    <div class="container page">
      <div class="header">
        <h1>{{ school.name }}</h1> 
        <h2>Detailled information :</h2>
      </div>
      <div class="panel panel-default">
        <div class="panel-body">
          <div class="row">
            <div class="col-md-6">
              <div class="school-logo"><img src="{{ url_for('static', filename='img/school'+school[0]|string+'.jpg') }}"></div>
	      <dl class="dl-horizontal">
		<dt>Name :</dt>
		<dd>{{ school.name }}</dd>
		<dt>City :</dt>
		<dd>{{ school.city }}</dd>
		{% if school.district != None %}
		  <dt>District :</dt>
		  <dd>{{ school.district }}</dd>
		{% endif %}
		<dt>Website :</dt>
		<dd><a href="{{ school.website }}">{{ school.website }}</a></dd>
	      </dl>
	    </div>
              <div class="col-md-6">
                <iframe class="google-maps" src="{{school.googleLink}}" allowfullscreen="allowfullscreen"></iframe>
              </div>
            </div>
        </div>
      </div>
      {% if programs|length %}
      <div class="panel with-nav-tabs panel-default">
         <div class="panel-heading">
           <ul class="nav nav-tabs">
	   {% for program in programs %}
             <li id="tabs"><a href="#tab{{loop.index}}default" data-toggle="tab">Program {{loop.index}}</a></li>
           {% endfor %}
           </ul>
         </div>
	 <div class="panel-body">
	   <div class="tab-content">
	   {% for program in programs%}
	     <div class="tab-pane fade" id="tab{{loop.index}}default">
               <div class="row">
                 <div class="col-md-6">
	           <dl class="dl-horizontal">
		     <dt>Duration :</dt>
		     <dd>{{ program.duration }} months</dd>
		     {% if program.accoType != ''%}
		     <dt>Accomodation type :</dt>
		     <dd>{{ program.accoType }}</dd>
		     {% endif %}
		     <dt>Visa Support :</dt>
		     <dd>{{ program.visaSupp }}</dd>
		     <dt>EJU preparation :</dt>
		     <dd>{{ program.eju }}</dd>
		     <dt>JLPT preparation :</dt>
		     <dd>{{ program.jlpt }}</dd>
		     <dt>Additionnal notes :</dt>
		     <dd>{{ program.notes }}</dd>
	           </dl>
	         </div>
                 <div class="col-md-6">
	           <div class="panel panel-default">
                     <div class="panel-heading">Price</div>
                       <table class="table">
                         <tbody>
			   <tr>
                             <td><b>Application fee :</b></td>
                             <td>{{ format_price(program.appliFee) }} yens</td>
                           </tr>
			   <tr>
                             <td><b>Course fee :</b></td>
                             <td>{{ format_price(program.courseFee) }} yens</td>
                           </tr>
			   <tr>
                             <td><b>Accomodation fee :</b></td>
                             <td>{{ format_price(program.accoFee) }} yens</td>
                           </tr>
			   <tr>
                             <td><b>Total fee :</b></td>
                             <td>{{ format_price(program.appliFee+program.courseFee+program.accoFee) }} yens</td>
                           </tr>
			   <tr>
                             <td><b>Price per month (yens):</b></td>
                             <td>{{ format_price((program.appliFee+program.courseFee+program.accoFee)/program.duration) }} yens</td>
                           </tr>
			   <tr>
                             <td><b>Price per month (euros):</b></td>
                             <td>{{ format_price(((program.appliFee+program.courseFee+program.accoFee)/program.duration)/130) }} euros</td>
                           </tr>
                         </tbody>
                       </table>
                     </div>
                   </div>
	         </div>
               </div>
	   {% endfor %}
	   </div>
	 </div>
       {% endif %}
      </div>
    </div>
{% endblock %}

{% block scripts%}
<script>
var x = document.querySelectorAll("li#tabs");
x[0].setAttribute("class", "active"); 
var y = document.querySelectorAll("div:first-child.tab-pane.fade")
y[0].setAttribute("class", "tab-pane fade in active")
</script> 
{% endblock %}
